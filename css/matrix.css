/* Matrix Effects - Rain, glitch, CRT overlay */

/* Matrix Rain Canvas */
#matrix-rain {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: -1;
    opacity: 0.15;
    pointer-events: none;
}

/* CRT Overlay Container */
.crt-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 1000;
}

/* Scanlines Effect */
.scanlines {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: repeating-linear-gradient(
        0deg,
        rgba(0, 0, 0, 0.15),
        rgba(0, 0, 0, 0.15) 1px,
        transparent 1px,
        transparent 2px
    );
    pointer-events: none;
}

/* CRT Screen Curve */
.crt-curve {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: radial-gradient(
        ellipse at center,
        transparent 0%,
        transparent 70%,
        rgba(0, 0, 0, 0.3) 100%
    );
    pointer-events: none;
}

/* Screen flicker */
@keyframes screen-flicker {
    0%, 100% { opacity: 1; }
    92% { opacity: 1; }
    93% { opacity: 0.9; }
    94% { opacity: 1; }
    97% { opacity: 0.95; }
    98% { opacity: 1; }
}

.crt-overlay::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    animation: screen-flicker 8s infinite;
    background: transparent;
}

/* === GLITCH EFFECTS === */

/* Basic glitch text */
.glitch {
    position: relative;
    display: inline-block;
}

.glitch::before,
.glitch::after {
    content: attr(data-text);
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    opacity: 0;
}

.glitch::before {
    color: #ff0040;
    z-index: -1;
}

.glitch::after {
    color: #00ffff;
    z-index: -2;
}

/* Glitch animation on hover */
.glitch:hover::before,
.glitch:hover::after {
    opacity: 0.8;
}

.glitch:hover::before {
    animation: glitch-1 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94) infinite;
}

.glitch:hover::after {
    animation: glitch-2 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94) infinite reverse;
}

@keyframes glitch-1 {
    0%, 100% { clip-path: inset(40% 0 61% 0); transform: translate(-2px, 0); }
    20% { clip-path: inset(92% 0 1% 0); transform: translate(2px, 0); }
    40% { clip-path: inset(43% 0 1% 0); transform: translate(-2px, 0); }
    60% { clip-path: inset(25% 0 58% 0); transform: translate(2px, 0); }
    80% { clip-path: inset(54% 0 7% 0); transform: translate(-2px, 0); }
}

@keyframes glitch-2 {
    0%, 100% { clip-path: inset(50% 0 30% 0); transform: translate(2px, 0); }
    20% { clip-path: inset(10% 0 85% 0); transform: translate(-2px, 0); }
    40% { clip-path: inset(73% 0 12% 0); transform: translate(2px, 0); }
    60% { clip-path: inset(35% 0 48% 0); transform: translate(-2px, 0); }
    80% { clip-path: inset(84% 0 3% 0); transform: translate(2px, 0); }
}

/* Glitch hover for timer digits */
.glitch-hover {
    position: relative;
    transition: all 0.1s ease;
}

.glitch-hover:hover {
    animation: digit-glitch 0.2s ease;
}

@keyframes digit-glitch {
    0%, 100% { transform: translate(0, 0); }
    25% { transform: translate(-2px, 1px); filter: hue-rotate(90deg); }
    50% { transform: translate(2px, -1px); }
    75% { transform: translate(-1px, -1px); filter: hue-rotate(-90deg); }
}

/* Active glitch - for when timer is running */
.glitch-active {
    animation: active-glitch 5s ease-in-out infinite;
}

@keyframes active-glitch {
    0%, 90%, 100% {
        transform: translate(0, 0);
        filter: none;
    }
    91% {
        transform: translate(-2px, 0);
        filter: hue-rotate(90deg);
    }
    92% {
        transform: translate(2px, 0);
        filter: none;
    }
    93% {
        transform: translate(0, 0);
        filter: hue-rotate(-90deg);
    }
    94% {
        transform: translate(-1px, 1px);
        filter: none;
    }
}

/* Screen tear effect */
@keyframes screen-tear {
    0%, 100% {
        clip-path: inset(0 0 0 0);
    }
    50% {
        clip-path: inset(0 0 0 0);
    }
    50.5% {
        clip-path: polygon(0 0, 100% 0, 100% 45%, 0 47%, 0 48%, 100% 46%, 100% 100%, 0 100%);
    }
    51% {
        clip-path: inset(0 0 0 0);
    }
}

.screen-tear {
    animation: screen-tear 10s linear infinite;
}

/* RGB Split effect for buttons and important elements */
.rgb-split {
    position: relative;
}

.rgb-split::before,
.rgb-split::after {
    content: attr(data-text);
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    opacity: 0;
    transition: opacity 0.2s ease;
}

.rgb-split::before {
    color: #ff0040;
    transform: translate(-2px, 0);
}

.rgb-split::after {
    color: #00ffff;
    transform: translate(2px, 0);
}

.rgb-split:hover::before,
.rgb-split:hover::after {
    opacity: 0.5;
}

/* Matrix rain intensity control */
.matrix-intense #matrix-rain {
    opacity: 0.25;
}

.matrix-dim #matrix-rain {
    opacity: 0.08;
}

/* Noise grain overlay - subtle texture */
.noise::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.04'/%3E%3C/svg%3E");
    pointer-events: none;
    z-index: 999;
    opacity: 0.5;
}
